{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import ProductCard from'../components/ProductCard';import axios from'axios';import BACKEND_URL from'../config';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserProfile=()=>{const{userId}=useParams();const[user,setUser]=useState(null);const[products,setProducts]=useState([]);const[reviews,setReviews]=useState([]);const{logout}=useAuth();const navigate=useNavigate();const[showLogoutConfirm,setShowLogoutConfirm]=useState(false);const handleLogout=()=>{setShowLogoutConfirm(true);};const confirmLogout=()=>{logout();setShowLogoutConfirm(false);navigate('/login');};const cancelLogout=()=>{setShowLogoutConfirm(false);};useEffect(()=>{const fetchUserProfile=async()=>{try{const response=await axios.get(\"\".concat(BACKEND_URL,\"/api/auth/\").concat(userId));const{user}=response.data;setUser(user);setProducts(user.products||[]);setReviews(user.reviewsReceived||[]);}catch(error){console.error('Failed to fetch user profile:',error);// Handle error, e.g., redirect to 404 or show error message\n}};fetchUserProfile();},[userId]);if(!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-24 w-24 rounded-full bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl font-bold text-gray-500\",children:user.name.charAt(0)})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[\" \",/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-base-text\",children:user.name}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"ml-4 px-4 py-2 bg-gray-400 text-white text-sm font-medium rounded-md shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-400 transform hover:scale-105 transition duration-300\",children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mr-8\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Seller Rating:\"}),\" \",user.sellerRating||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Buyer Rating:\"}),\" \",user.buyerRating||'N/A']})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-base-text mb-4\",children:\"Products for Sale\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\",children:products.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product},product.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-base-text mb-4\",children:\"Reviews\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-8\",children:reviews.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-8\",children:reviews.map(review=>/*#__PURE__*/_jsx(\"li\",{},review.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No reviews yet.\"})})]})]}),showLogoutConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:\"Confirm Logout\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 px-7 py-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Are you sure you want to log out?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-center px-4 py-3 sm:flex sm:justify-center sm:space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:confirmLogout,className:\"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 sm:w-auto transform hover:scale-105 transition duration-300\",children:\"Yes, Logout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelLogout,className:\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm transform hover:scale-105 transition duration-300\",children:\"Cancel\"})]})]})})})]})// Added closing React Fragment\n;};export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ProductCard","axios","BACKEND_URL","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserProfile","userId","user","setUser","products","setProducts","reviews","setReviews","logout","navigate","showLogoutConfirm","setShowLogoutConfirm","handleLogout","confirmLogout","cancelLogout","fetchUserProfile","response","get","concat","data","reviewsReceived","error","console","children","className","name","charAt","onClick","email","sellerRating","buyerRating","map","product","id","length","review"],"sources":["C:/Users/flyin/Desktop/WEBSITE/frontend/src/pages/UserProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport axios from 'axios';\nimport BACKEND_URL from '../config';\nimport { useAuth } from '../context/AuthContext';\n\nconst UserProfile = () => {\n  const { userId } = useParams();\n  const [user, setUser] = useState(null);\n  const [products, setProducts] = useState([]);\n  const [reviews, setReviews] = useState([]);\n  const { logout } = useAuth();\n  const navigate = useNavigate();\n  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false);\n\n  const handleLogout = () => {\n    setShowLogoutConfirm(true);\n  };\n\n  const confirmLogout = () => {\n    logout();\n    setShowLogoutConfirm(false);\n    navigate('/login');\n  };\n\n  const cancelLogout = () => {\n    setShowLogoutConfirm(false);\n  };\n\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      try {\n        const response = await axios.get(`${BACKEND_URL}/api/auth/${userId}`);\n        const { user } = response.data;\n        setUser(user);\n        setProducts(user.products || []);\n        setReviews(user.reviewsReceived || []);\n      } catch (error) {\n        console.error('Failed to fetch user profile:', error);\n        // Handle error, e.g., redirect to 404 or show error message\n      }\n    };\n\n    fetchUserProfile();\n  }, [userId]);\n\n  if (!user) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <>\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n      <div className=\"bg-white rounded-lg shadow-md p-8\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <div className=\"h-24 w-24 rounded-full bg-gray-200 flex items-center justify-center\">\n              <span className=\"text-4xl font-bold text-gray-500\">{user.name.charAt(0)}</span>\n            </div>\n          </div>\n          <div className=\"ml-8\">\n            <div className=\"flex items-center justify-between\"> {/* Added flex and justify-between */}\n              <h1 className=\"text-3xl font-bold text-base-text\">{user.name}</h1>\n              <button\n                onClick={handleLogout}\n                className=\"ml-4 px-4 py-2 bg-gray-400 text-white text-sm font-medium rounded-md shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-400 transform hover:scale-105 transition duration-300\"\n              >\n                Logout\n              </button>\n            </div>\n            <p className=\"text-gray-600\">{user.email}</p>\n            <div className=\"flex items-center mt-4\">\n              <div className=\"mr-8\">\n                <span className=\"font-bold\">Seller Rating:</span> {user.sellerRating || 'N/A'}\n              </div>\n              <div>\n                <span className=\"font-bold\">Buyer Rating:</span> {user.buyerRating || 'N/A'}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mt-12\">\n        <h2 className=\"text-2xl font-bold text-base-text mb-4\">Products for Sale</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n          {products.map((product) => (\n            <ProductCard key={product.id} product={product} />\n          ))}\n        </div>\n      </div>\n\n      <div className=\"mt-12\">\n        <h2 className=\"text-2xl font-bold text-base-text mb-4\">Reviews</h2>\n        <div className=\"bg-white rounded-lg shadow-md p-8\">\n          {reviews.length > 0 ? (\n            <ul className=\"space-y-8\">\n              {reviews.map((review) => (\n                <li key={review.id}>\n                  {/* Review item */}\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p className=\"text-gray-600\">No reviews yet.</p>\n          )}\n        </div>\n      </div>\n    </div>\n\n    {/* Logout Confirmation Dialog */}\n    {showLogoutConfirm && (\n      <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50\">\n        <div className=\"relative mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n          <div className=\"mt-3 text-center\">\n            <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Confirm Logout</h3>\n            <div className=\"mt-2 px-7 py-3\">\n              <p className=\"text-sm text-gray-500\">Are you sure you want to log out?</p>\n            </div>\n            <div className=\"items-center px-4 py-3 sm:flex sm:justify-center sm:space-x-4\">\n              <button\n                onClick={confirmLogout}\n                className=\"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 sm:w-auto transform hover:scale-105 transition duration-300\"\n              >\n                Yes, Logout\n              </button>\n              <button\n                onClick={cancelLogout}\n                className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm transform hover:scale-105 transition duration-300\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )}\n    </> // Added closing React Fragment\n  );\n};\n\nexport default UserProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}